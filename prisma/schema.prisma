generator client {
  provider             = "prisma-client-py"
  recursive_type_depth = "5"
  interface            = "asyncio"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model User {
  id       String   @id @default(uuid())
  login    String   @unique
  password String
  clientId Int?
  role     Role
  subnets  Subnet[] @relation("SubnetToUser")
}

model Subnet {
  id         String   @id @default(uuid())
  name       String
  subnetIp   String
  subnetMask Int
  clients    Client[]
  User       User[]   @relation("SubnetToUser")
}

model Client {
  id            String  @id @default(uuid())
  name          String
  clientIp      String
  publicKey     String
  privateKeyRef String
  isEnabled     Boolean @default(true)
  subnetId      String
  subnet        Subnet  @relation(fields: [subnetId], references: [id])
}

enum Role {
  Admin
  Employee
}
