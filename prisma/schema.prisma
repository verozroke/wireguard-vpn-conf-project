generator client {
  provider             = "prisma-client-py"
  recursive_type_depth = "5"
  interface            = "asyncio"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:postgres@localhost:5433/postgres?scheme=public"
}

model User {
  id       String   @id @default(uuid())
  login    String   @unique
  password String
  role     Role
  subnets  Subnet[] @relation("SubnetToUser")
  clients  Client[] @relation("UserToClient")
}

model Subnet {
  id         String   @id @default(uuid())
  name       String
  subnetIp   String   @unique
  subnetMask Int
  clients    Client[] @relation("SubnetToClient")
  userId     String
  user       User     @relation(fields: [userId], references: [id], "SubnetToUser")
}

model Client {
  id            String  @id @default(uuid())
  name          String
  clientIp      String
  publicKey     String
  privateKeyRef String
  isEnabled     Boolean @default(true)
  subnetId      String
  subnet        Subnet  @relation(fields: [subnetId], references: [id], "SubnetToClient")
  userId        String
  user          User    @relation(fields: [userId], references: [id], "UserToClient")
}

enum Role {
  Admin
  Employee
}
